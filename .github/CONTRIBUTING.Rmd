---
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "",
  echo = FALSE,
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

This document guides contributors. It extends
[README](https://github.com/2DegreesInvesting/pactaCore/blob/main/README.md)
focusing on how this R package differs form a standard one.

* You may run or skip slow tests with an environment variable in .Renviron:

```{r}
writeLines(readLines(here::here(".Renviron")))
```

* The repositories PACTA_analysis/ is required for regression tests. Clone it
from 2DII's GitHub organization and keep it up to date with the repo on GitHub.

```bash
"git clone git@github.com:2DegreesInvesting/PACTA_analysis.git"
```

* Set the path to PACTA_analysis/ in the .env file, along with the other,
user-facing environment variables.

```{r}
writeLines(readLines(here::here(".env")))
```

* To work from docker container run `docker-compose up` and point to web browser
to localhost:8787.

* In the container, the required directories will be mounted
under the /home/rstudio, and discovered via the file .env_rstudio:

```{r}
writeLines(readLines(here::here(".env_rstudio")))
```

* Git ignores all files under the directory tests/testthat/_snaps/ to avoid
leaking private data. Re-include public snapshots in .gitignore with a negation
pattern (!), e.g.:

```{r}
lines <- readLines(here::here(".gitignore"))
writeLines(grep("testthat/_snaps", lines, value = TRUE))
```

* Git ignores the directory tests/testthat/private/. Use it to store regression
references or other private data.

```{r}
fs::dir_tree(here::here("tests", "testthat", "private"))
```

You may compare two lists of reference datasets with the internal function
`compare_full()`.
